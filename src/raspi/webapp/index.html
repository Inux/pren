<!DOCTYPE html>
<html>
    <head>
        <title>
            Team 28
        </title>
    </head>
    <body>
        <section id="curveDetection">
            <h1 id="direction"></h1>
        </section>
        <script>
            //Variables & Constants
            var updateInterval = 500 // 500ms

            //set values to initial value
            document.getElementById("direction").innerText = "undefined";

            //Helpers
            function apiGet(callback) {
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.onreadystatechange = function() {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                        console.log('responseText:' + xmlhttp.responseText);
                        try {
                            var data = JSON.parse(xmlhttp.responseText);
                        } catch(err) {
                            console.log(err.message + " in " + xmlhttp.responseText);
                            return;
                        }
                        callback(data);
                    }
                };
                xmlhttp.open("GET", '/api', true);
                xmlhttp.send();
            }

            // UI

            //updateUI method (called by setTimeout each 500ms)
            function updateUI(data) {
                console.log("Received Data:");
                console.log(data);
                updateDirection(data.direction);
            }

            function updateDirection(direction) {
                document.getElementById("direction").innerText = direction;
            }
            function playSound(sound_nr){
                xmlhttp = new XMLHttpRequest()
                xmlhttp.open('GET', '/sound/' + sound_nr, true)
                xmlhttp.send()
                alert("playing Sound #1")
            }

            setInterval(apiGet, updateInterval, updateUI);
        </script>
        <button onclick='playSound(1)'> Play sound #1 </button>
        <button onclick='playSound(2)'> Play sound #2 </button>
        <button onclick='playSound(3)'> Play sound #3 </button>
        <button onclick='playSound(4)'> Play sound #4 </button>
        <button onclick='playSound(5)'> Play sound #5 </button>
        <button onclick='playSound(6)'> Play sound #6 </button>
        <button onclick='playSound(7)'> Play sound #7 </button>
        <button onclick='playSound(8)'> Play sound #8 </button>
        <button onclick='playSound(9)'> Play sound #9 </button>
    </body>
</html>